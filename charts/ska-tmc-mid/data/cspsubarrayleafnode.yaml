name: "cspsubarrayleafnode-test"
function: telescope-monitoring
domain: general-monitoring
instances: ["01", "02"]
entrypoints:
  - name: "ska_tmc_cspsubarrayleafnode.csp_subarray_leaf_node.CspSubarrayLeafNode"
server:
  name: "csp_subarray_leaf_node"
  instances:
  {{- range  .Values.coalesced_subarray_devices }}
    - name: "{{ . }}"
      classes:
      - name: "CspSubarrayLeafNode"
        devices:
          - name: "ska_mid/tm_leaf_node/csp_subarray{{ . }}"
            properties:
              - name: "CspSubarrayFQDN"
                values:
                - "mid_csp/elt/subarray_{{ . }}"
              - name: "SkaLevel"
                values:
                - "3"
              - name: "LoggingTargetsDefault"
                values:
                - "tango::logger"
              - name: "LoggingLevelDefault"
                values:
                - "5"
  {{- end}}
depends_on:
  - device: sys/database/2
  - device: mid_csp/elt/subarray_01
  - device: mid_csp/elt/subarray_02
image:
  registry: "{{.Values.cspleafnodes.image.registry}}"
  image: "{{.Values.cspleafnodes.image.image}}"
  tag: "{{.Values.cspleafnodes.image.tag}}"
  pullPolicy: "{{.Values.cspleafnodes.image.pullPolicy}}"

